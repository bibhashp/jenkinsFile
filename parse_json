
 import groovy.json.JsonSlurper
 
 def myLib = library(identifier: 'JenkinsSharedLib@develop', retriever: modernSCM
    (
        [
            $class: 'GitSCMSource',
            remote: 'https://github.com/bibhashp/JenkinsSharedLib.git',
            credentialsId: 'BITBUCKET_CRED'
        ]
    ))
    
    
def filename = readFile "C:\\Users\\bp\\Documents\\GitHub\\parse_json.json"
JsonSlurper slurper = new JsonSlurper()
Map parsedJson = slurper.parseText(filename)

def function_list = ['scmcheckout', 'welcome','buildpackage', 'uploadartifact', 'notification', 'extended_function'];

try{

for( stage in parsedJson){

    def running_set = [failFast: true]
    for(int index=0; index<stage.value.size();index++)
    {
        task_name = stage.value[index].toString()
        ifunctionIndex = 1
        println "${task_name}"
		running_set["${task_name}"] = { "${function_list[ifunctionIndex]}"() }
    }
    

    stage("1")
	{
		parallel(running_set)
	}
}
}catch(err){
print err
}
