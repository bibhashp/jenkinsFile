
def myLib = library(identifier: 'JenkinsSharedLib@develop', retriever: modernSCM
    (
        [
            $class: 'GitSCMSource',
            remote: 'https://github.com/bibhashp/JenkinsSharedLib.git',
            credentialsId: 'BITBUCKET_CRED'
        ]
    ))

properties([
    parameters([
        string(name: 'paramBuildList', defaultValue: "Task1,Task2,Task3;Second1,Second2,Second3;Third1;Last1,Last2,Last3")
    ])
])

String[] str;
def myList;
def function_list = ['scmcheckout', 'welcome','buildpackage', 'uploadartifact', 'notification', 'extended_function'];
def  ifunctionIndex = 2
//def running_set = [:]
paramBuildList = paramBuildList.replace(" ","");

def index = 0
str = paramBuildList.split(';');
      
for( String values : str )
{
    taskList = values.split(',') as List;
    def running_set = [failFast: true]
	
    for(int j=0; j < taskList.size(); j++)
    {
		ifunctionIndex = 1
		running_set["${taskList[index]}"] = { "${function_list[ifunctionIndex]}"() }
    }

    //print(running_set)
	//print("\n")
	
	stage("Stage My Stage")
	{
		parallel(running_set)
	}
}
